# Generated by the gRPC Python protocol compiler plugin. DO NOT EDIT!
"""Client and server classes corresponding to protobuf-defined services."""

import grpc

from nexus.raft import transport_pb2 as nexus_dot_raft_dot_transport__pb2

GRPC_GENERATED_VERSION = "1.76.0"
GRPC_VERSION = grpc.__version__
_version_not_supported = False

try:
    from grpc._utilities import first_version_is_lower

    _version_not_supported = first_version_is_lower(GRPC_VERSION, GRPC_GENERATED_VERSION)
except ImportError:
    _version_not_supported = True

if _version_not_supported:
    raise RuntimeError(
        f"The grpc package installed is at version {GRPC_VERSION},"
        + " but the generated code in nexus/raft/transport_pb2_grpc.py depends on"
        + f" grpcio>={GRPC_GENERATED_VERSION}."
        + f" Please upgrade your grpc module to grpcio>={GRPC_GENERATED_VERSION}"
        + f" or downgrade your generated code using grpcio-tools<={GRPC_VERSION}."
    )


class RaftServiceStub:
    """RaftService handles Raft consensus protocol messages.

    This service is used for communication between Raft nodes (leaders, followers, witnesses).
    """

    def __init__(self, channel):
        """Constructor.

        Args:
            channel: A grpc.Channel.
        """
        self.RequestVote = channel.unary_unary(
            "/nexus.raft.RaftService/RequestVote",
            request_serializer=nexus_dot_raft_dot_transport__pb2.VoteRequest.SerializeToString,
            response_deserializer=nexus_dot_raft_dot_transport__pb2.VoteResponse.FromString,
            _registered_method=True,
        )
        self.AppendEntries = channel.unary_unary(
            "/nexus.raft.RaftService/AppendEntries",
            request_serializer=nexus_dot_raft_dot_transport__pb2.AppendEntriesRequest.SerializeToString,
            response_deserializer=nexus_dot_raft_dot_transport__pb2.AppendEntriesResponse.FromString,
            _registered_method=True,
        )
        self.InstallSnapshot = channel.stream_unary(
            "/nexus.raft.RaftService/InstallSnapshot",
            request_serializer=nexus_dot_raft_dot_transport__pb2.SnapshotChunk.SerializeToString,
            response_deserializer=nexus_dot_raft_dot_transport__pb2.InstallSnapshotResponse.FromString,
            _registered_method=True,
        )
        self.TransferLeader = channel.unary_unary(
            "/nexus.raft.RaftService/TransferLeader",
            request_serializer=nexus_dot_raft_dot_transport__pb2.TransferLeaderRequest.SerializeToString,
            response_deserializer=nexus_dot_raft_dot_transport__pb2.TransferLeaderResponse.FromString,
            _registered_method=True,
        )


class RaftServiceServicer:
    """RaftService handles Raft consensus protocol messages.

    This service is used for communication between Raft nodes (leaders, followers, witnesses).
    """

    def RequestVote(self, request, context):
        """RequestVote is called by candidates to gather votes during leader election."""
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details("Method not implemented!")
        raise NotImplementedError("Method not implemented!")

    def AppendEntries(self, request, context):
        """AppendEntries is called by leaders to replicate log entries and send heartbeats."""
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details("Method not implemented!")
        raise NotImplementedError("Method not implemented!")

    def InstallSnapshot(self, request_iterator, context):
        """InstallSnapshot is called by leaders to send a snapshot to lagging followers."""
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details("Method not implemented!")
        raise NotImplementedError("Method not implemented!")

    def TransferLeader(self, request, context):
        """TransferLeader requests the current leader to transfer leadership."""
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details("Method not implemented!")
        raise NotImplementedError("Method not implemented!")


def add_RaftServiceServicer_to_server(servicer, server):
    rpc_method_handlers = {
        "RequestVote": grpc.unary_unary_rpc_method_handler(
            servicer.RequestVote,
            request_deserializer=nexus_dot_raft_dot_transport__pb2.VoteRequest.FromString,
            response_serializer=nexus_dot_raft_dot_transport__pb2.VoteResponse.SerializeToString,
        ),
        "AppendEntries": grpc.unary_unary_rpc_method_handler(
            servicer.AppendEntries,
            request_deserializer=nexus_dot_raft_dot_transport__pb2.AppendEntriesRequest.FromString,
            response_serializer=nexus_dot_raft_dot_transport__pb2.AppendEntriesResponse.SerializeToString,
        ),
        "InstallSnapshot": grpc.stream_unary_rpc_method_handler(
            servicer.InstallSnapshot,
            request_deserializer=nexus_dot_raft_dot_transport__pb2.SnapshotChunk.FromString,
            response_serializer=nexus_dot_raft_dot_transport__pb2.InstallSnapshotResponse.SerializeToString,
        ),
        "TransferLeader": grpc.unary_unary_rpc_method_handler(
            servicer.TransferLeader,
            request_deserializer=nexus_dot_raft_dot_transport__pb2.TransferLeaderRequest.FromString,
            response_serializer=nexus_dot_raft_dot_transport__pb2.TransferLeaderResponse.SerializeToString,
        ),
    }
    generic_handler = grpc.method_handlers_generic_handler(
        "nexus.raft.RaftService", rpc_method_handlers
    )
    server.add_generic_rpc_handlers((generic_handler,))
    server.add_registered_method_handlers("nexus.raft.RaftService", rpc_method_handlers)


# This class is part of an EXPERIMENTAL API.
class RaftService:
    """RaftService handles Raft consensus protocol messages.

    This service is used for communication between Raft nodes (leaders, followers, witnesses).
    """

    @staticmethod
    def RequestVote(
        request,
        target,
        options=(),
        channel_credentials=None,
        call_credentials=None,
        insecure=False,
        compression=None,
        wait_for_ready=None,
        timeout=None,
        metadata=None,
    ):
        return grpc.experimental.unary_unary(
            request,
            target,
            "/nexus.raft.RaftService/RequestVote",
            nexus_dot_raft_dot_transport__pb2.VoteRequest.SerializeToString,
            nexus_dot_raft_dot_transport__pb2.VoteResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True,
        )

    @staticmethod
    def AppendEntries(
        request,
        target,
        options=(),
        channel_credentials=None,
        call_credentials=None,
        insecure=False,
        compression=None,
        wait_for_ready=None,
        timeout=None,
        metadata=None,
    ):
        return grpc.experimental.unary_unary(
            request,
            target,
            "/nexus.raft.RaftService/AppendEntries",
            nexus_dot_raft_dot_transport__pb2.AppendEntriesRequest.SerializeToString,
            nexus_dot_raft_dot_transport__pb2.AppendEntriesResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True,
        )

    @staticmethod
    def InstallSnapshot(
        request_iterator,
        target,
        options=(),
        channel_credentials=None,
        call_credentials=None,
        insecure=False,
        compression=None,
        wait_for_ready=None,
        timeout=None,
        metadata=None,
    ):
        return grpc.experimental.stream_unary(
            request_iterator,
            target,
            "/nexus.raft.RaftService/InstallSnapshot",
            nexus_dot_raft_dot_transport__pb2.SnapshotChunk.SerializeToString,
            nexus_dot_raft_dot_transport__pb2.InstallSnapshotResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True,
        )

    @staticmethod
    def TransferLeader(
        request,
        target,
        options=(),
        channel_credentials=None,
        call_credentials=None,
        insecure=False,
        compression=None,
        wait_for_ready=None,
        timeout=None,
        metadata=None,
    ):
        return grpc.experimental.unary_unary(
            request,
            target,
            "/nexus.raft.RaftService/TransferLeader",
            nexus_dot_raft_dot_transport__pb2.TransferLeaderRequest.SerializeToString,
            nexus_dot_raft_dot_transport__pb2.TransferLeaderResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True,
        )


class EventStreamServiceStub:
    """EventStreamService provides streaming events (reusable for webhooks).

    This service demonstrates how gRPC Server Streaming can replace
    HTTP-based webhooks for real-time event delivery.
    """

    def __init__(self, channel):
        """Constructor.

        Args:
            channel: A grpc.Channel.
        """
        self.Subscribe = channel.unary_stream(
            "/nexus.raft.EventStreamService/Subscribe",
            request_serializer=nexus_dot_raft_dot_transport__pb2.SubscribeRequest.SerializeToString,
            response_deserializer=nexus_dot_raft_dot_transport__pb2.Event.FromString,
            _registered_method=True,
        )


class EventStreamServiceServicer:
    """EventStreamService provides streaming events (reusable for webhooks).

    This service demonstrates how gRPC Server Streaming can replace
    HTTP-based webhooks for real-time event delivery.
    """

    def Subscribe(self, request, context):
        """Subscribe to a stream of events.
        This is the streaming pattern that can be used for webhooks.
        """
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details("Method not implemented!")
        raise NotImplementedError("Method not implemented!")


def add_EventStreamServiceServicer_to_server(servicer, server):
    rpc_method_handlers = {
        "Subscribe": grpc.unary_stream_rpc_method_handler(
            servicer.Subscribe,
            request_deserializer=nexus_dot_raft_dot_transport__pb2.SubscribeRequest.FromString,
            response_serializer=nexus_dot_raft_dot_transport__pb2.Event.SerializeToString,
        ),
    }
    generic_handler = grpc.method_handlers_generic_handler(
        "nexus.raft.EventStreamService", rpc_method_handlers
    )
    server.add_generic_rpc_handlers((generic_handler,))
    server.add_registered_method_handlers("nexus.raft.EventStreamService", rpc_method_handlers)


# This class is part of an EXPERIMENTAL API.
class EventStreamService:
    """EventStreamService provides streaming events (reusable for webhooks).

    This service demonstrates how gRPC Server Streaming can replace
    HTTP-based webhooks for real-time event delivery.
    """

    @staticmethod
    def Subscribe(
        request,
        target,
        options=(),
        channel_credentials=None,
        call_credentials=None,
        insecure=False,
        compression=None,
        wait_for_ready=None,
        timeout=None,
        metadata=None,
    ):
        return grpc.experimental.unary_stream(
            request,
            target,
            "/nexus.raft.EventStreamService/Subscribe",
            nexus_dot_raft_dot_transport__pb2.SubscribeRequest.SerializeToString,
            nexus_dot_raft_dot_transport__pb2.Event.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True,
        )


class RaftClientServiceStub:
    """RaftClientService provides the client-facing API for Raft operations.

    This service is used by clients (Python, CLI, etc.) to interact with the Raft cluster.
    It differs from RaftService which is for internal node-to-node communication.

    Architecture:
    - Propose: Write operations → goes through Raft log → applied to state machine
    - Query: Read operations → served directly from state machine (any node)

    Leader handling:
    - Propose: If not leader, returns leader address for client to redirect
    - Query: Can be served by any node (eventual consistency) or redirected to leader (strong consistency)
    """

    def __init__(self, channel):
        """Constructor.

        Args:
            channel: A grpc.Channel.
        """
        self.Propose = channel.unary_unary(
            "/nexus.raft.RaftClientService/Propose",
            request_serializer=nexus_dot_raft_dot_transport__pb2.ProposeRequest.SerializeToString,
            response_deserializer=nexus_dot_raft_dot_transport__pb2.ProposeResponse.FromString,
            _registered_method=True,
        )
        self.Query = channel.unary_unary(
            "/nexus.raft.RaftClientService/Query",
            request_serializer=nexus_dot_raft_dot_transport__pb2.QueryRequest.SerializeToString,
            response_deserializer=nexus_dot_raft_dot_transport__pb2.QueryResponse.FromString,
            _registered_method=True,
        )
        self.GetClusterInfo = channel.unary_unary(
            "/nexus.raft.RaftClientService/GetClusterInfo",
            request_serializer=nexus_dot_raft_dot_transport__pb2.GetClusterInfoRequest.SerializeToString,
            response_deserializer=nexus_dot_raft_dot_transport__pb2.GetClusterInfoResponse.FromString,
            _registered_method=True,
        )


class RaftClientServiceServicer:
    """RaftClientService provides the client-facing API for Raft operations.

    This service is used by clients (Python, CLI, etc.) to interact with the Raft cluster.
    It differs from RaftService which is for internal node-to-node communication.

    Architecture:
    - Propose: Write operations → goes through Raft log → applied to state machine
    - Query: Read operations → served directly from state machine (any node)

    Leader handling:
    - Propose: If not leader, returns leader address for client to redirect
    - Query: Can be served by any node (eventual consistency) or redirected to leader (strong consistency)
    """

    def Propose(self, request, context):
        """Propose submits a command to be replicated through Raft.
        Only the leader can accept proposals; followers return a redirect.

        Use for: put_metadata, delete_metadata, acquire_lock, release_lock, extend_lock
        """
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details("Method not implemented!")
        raise NotImplementedError("Method not implemented!")

    def Query(self, request, context):
        """Query reads from the local state machine without going through Raft.
        Can be served by any node. Use read_from_leader=true for linearizable reads.

        Use for: get_metadata, list_metadata, get_lock_info
        """
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details("Method not implemented!")
        raise NotImplementedError("Method not implemented!")

    def GetClusterInfo(self, request, context):
        """GetClusterInfo returns information about the Raft cluster."""
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details("Method not implemented!")
        raise NotImplementedError("Method not implemented!")


def add_RaftClientServiceServicer_to_server(servicer, server):
    rpc_method_handlers = {
        "Propose": grpc.unary_unary_rpc_method_handler(
            servicer.Propose,
            request_deserializer=nexus_dot_raft_dot_transport__pb2.ProposeRequest.FromString,
            response_serializer=nexus_dot_raft_dot_transport__pb2.ProposeResponse.SerializeToString,
        ),
        "Query": grpc.unary_unary_rpc_method_handler(
            servicer.Query,
            request_deserializer=nexus_dot_raft_dot_transport__pb2.QueryRequest.FromString,
            response_serializer=nexus_dot_raft_dot_transport__pb2.QueryResponse.SerializeToString,
        ),
        "GetClusterInfo": grpc.unary_unary_rpc_method_handler(
            servicer.GetClusterInfo,
            request_deserializer=nexus_dot_raft_dot_transport__pb2.GetClusterInfoRequest.FromString,
            response_serializer=nexus_dot_raft_dot_transport__pb2.GetClusterInfoResponse.SerializeToString,
        ),
    }
    generic_handler = grpc.method_handlers_generic_handler(
        "nexus.raft.RaftClientService", rpc_method_handlers
    )
    server.add_generic_rpc_handlers((generic_handler,))
    server.add_registered_method_handlers("nexus.raft.RaftClientService", rpc_method_handlers)


# This class is part of an EXPERIMENTAL API.
class RaftClientService:
    """RaftClientService provides the client-facing API for Raft operations.

    This service is used by clients (Python, CLI, etc.) to interact with the Raft cluster.
    It differs from RaftService which is for internal node-to-node communication.

    Architecture:
    - Propose: Write operations → goes through Raft log → applied to state machine
    - Query: Read operations → served directly from state machine (any node)

    Leader handling:
    - Propose: If not leader, returns leader address for client to redirect
    - Query: Can be served by any node (eventual consistency) or redirected to leader (strong consistency)
    """

    @staticmethod
    def Propose(
        request,
        target,
        options=(),
        channel_credentials=None,
        call_credentials=None,
        insecure=False,
        compression=None,
        wait_for_ready=None,
        timeout=None,
        metadata=None,
    ):
        return grpc.experimental.unary_unary(
            request,
            target,
            "/nexus.raft.RaftClientService/Propose",
            nexus_dot_raft_dot_transport__pb2.ProposeRequest.SerializeToString,
            nexus_dot_raft_dot_transport__pb2.ProposeResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True,
        )

    @staticmethod
    def Query(
        request,
        target,
        options=(),
        channel_credentials=None,
        call_credentials=None,
        insecure=False,
        compression=None,
        wait_for_ready=None,
        timeout=None,
        metadata=None,
    ):
        return grpc.experimental.unary_unary(
            request,
            target,
            "/nexus.raft.RaftClientService/Query",
            nexus_dot_raft_dot_transport__pb2.QueryRequest.SerializeToString,
            nexus_dot_raft_dot_transport__pb2.QueryResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True,
        )

    @staticmethod
    def GetClusterInfo(
        request,
        target,
        options=(),
        channel_credentials=None,
        call_credentials=None,
        insecure=False,
        compression=None,
        wait_for_ready=None,
        timeout=None,
        metadata=None,
    ):
        return grpc.experimental.unary_unary(
            request,
            target,
            "/nexus.raft.RaftClientService/GetClusterInfo",
            nexus_dot_raft_dot_transport__pb2.GetClusterInfoRequest.SerializeToString,
            nexus_dot_raft_dot_transport__pb2.GetClusterInfoResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True,
        )
